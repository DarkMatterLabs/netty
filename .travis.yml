language: java
sudo: false

script:
  - mvn test
  - mvn package -DskipTests=true

deploy:
  provider: s3
  access_key_id: "AKIAJS4BBE3UNZOUE5EQ"
  secret_access_key: 
    secure: ctsctCTa2rA8ClH+Jf5vOGPS1p8BZua6Ilq3aioeNV5AoGKX4eBUELHuDreqNal7WoanNcONArVQ3l5xF9D8/F0nLcgRH6qCzXHRjoYlnJlPLMuriQWrKzKc8jBh1tGxSHj7MLNzqFuWArfsl/e3Fok2K8YcztZCpEA4bwS/FfdVEBhd880SJWl866wO/yAEvz1MK04rrICRRJHRP7ZWFluJpQXOFXAP3ARO11CXa3qX7iKwcBoVhVbiPjaUwlOx3kshSm3VCWcsvh4Npzrlu7ebcnZTU5X1zOxfkN+1lN46zH6Y6zP0Wf9hQ1tSrum+QAQ2/V3aoZWxfYoj4jb45ZQiXAS6w7HegQqECSg8kE5qP0VwhbZgML8elN9FjYZykbJQPRPWHGA4HHVQrVqKy6RES4ujoGKPOq6wqJxV1eftYnu1gY3SVQUgmIKY6OJf8ndV2jt1UkIch5V0KFSy1LrQRJnm4GIWsX7FmWRepGupcR9h7n2ygbjkZiaWI6ZgtiSbG6ZHi7FNp9yGt9pJJY7W17Of8zSDLyXpDmMxAmkSKEVnhyufQNb2EMM4Tg11hF9C2KwiQ1sRU8uHIZGpY8cH9N+2pYnaB+wm4dnMRMuo0mT2rAkSRHvTZEfRoR3FwmcvNax5Jlo4U352BXAzzHhdq45Vmr8Hz5GlikjZLCM=
  bucket: "keynexus-builds"
  skip_cleanup: true
  region: us-west-1
  local_dir: target
  upload-dir: java/netty
  on: 
    branch: '3.10'


# Set up notification options
notifications: 
  email:
    recipients:
      - devops@keynexus.net

    # change is when the repo status goes from pass to fail or vice versa
    on_success: change
    on_failure: always

# declare your environment variables
env:
  # global will stay the same across all matrix possibilities (will not create additional combinations to run)
  global: 
    - KN_THEME=default
    - KN_ENVIRONMENT=test
    - CC_TEST_REPORTER_ID=45c807ce000072ac08ab5da26a869f6d79f31f640d437ff7850707c76e29c771

# configure which branches to run
branches:
  except:
    - /^wip.*$/
    - /^test.*/
