language: java
sudo: false

before_script:
  - cp $TRAVIS_BUILD_DIR/.travis.settings.xml ~/.m2/settings.xml 

script:
  - mvn test
  - mvn package -DskipTests=true

after_success:
  - mvn deploy

# Set up notification options
notifications: 
  email:
    recipients:
      - devops@keynexus.net

    # change is when the repo status goes from pass to fail or vice versa
    on_success: change
    on_failure: always

# declare your environment variables
env:
  # global will stay the same across all matrix possibilities (will not create additional combinations to run)
  global: 
    - KN_THEME=default
    - KN_ENVIRONMENT=test
    - CC_TEST_REPORTER_ID=45c807ce000072ac08ab5da26a869f6d79f31f640d437ff7850707c76e29c771
  
  #artifactory id, encrypted value
  secure: "aJK+02wGpaVCW4fTHtEz+A1+rw01Tdrksg6Xq7QhFz1UHx11cdMqUHPlrUzEPxGNnrThmVnqzFyxGq7lXUwG9o4q7aBmaYji2m6jjo9kRTUgR9788bQHGShtwtxdajmP3l2wddBuJJAfL9/eCgcTKFk3gCdUxtPwOXzuW9y1IXA/HIXwgF5NOzoauaMXtxOx3orsU5nO7yOr4udP+04Zy//t8h3BItDUqMWX0uKrwGaNkYOiE6s8BKHEWQ+UTEGVbYeUUFLDGRXPEsr0BcAdD0eMNjlLdaaJHep+DEo4hFATVCYQR+apex4IBRnfAG2CzRy2OAnUj3pNYCBkAlWnIEfkRTmlCoLkn3alhtRcrMp0Cne398fdpaSNO7gYO7DVMkWYsaQhlVhdJslVqlTt6GrkjbIwUoejdQX9VCqfiTt4sCDVwlpl7tqXPHUuib44FyV+aaOXDyHOrDDNDAAr9sMUfkqyXVRgM2U1Xi+QO5dgnBX80eEuFEyi5fNbVudBx5Zk85fMEGjPEUw1BJpOY2CgZvbnIqMcNZEXxgQ6iCbawRz2QG1Ym4Of5lfqilv2MDwdRsUgMKCtwINUW9xCW64N/2QbyW6YIz8REknSO3YXE7oi2Fl85n2PFPn2IvTm2dR2KDfZRM4qIaNME+dUorb34HsjUpiEV5Cm9NCriF8="

  # artifactory password, encrypted value
  secure: "fSH26HzN4vuJQPN2wM3lRZnTqAhasLbECCeJYYfA46A2ZhuLbDdnGvm01AONAe5StUXsHDIf5XwFVTGMkLJyHj3O8MfzBjbFMlXxLNT5LVs97r987elzsopQfA9C5OXHHc+IMXhCFTnduOkxfQF8Y5FX1+c8ZvOHOH0SYMd8CvmgU7UZ/e99hqo4wwjOJsprsrJemcBcgqUBcOMcF0lo7Gw0b8j5q9TF+4bgc/lv0iulPv1/L23ztYVOqrN/GbhawLPcaKXAblMmbX+stCGT4ARbSUYnnl83N2HvxEzUABdgBVyrYda4bLyWWVjJfVUkivoHoD/yz6d1YsYETETt7kh/JKBzDuxWFOdiDyPsiL+VuBT7SERMr5nfgqsTMjfKJnuCTQ9tQ1yLFBzzf5UAtLKfhnJB2ZKBQfLVE3k5T4RvGqXKAoB1xFwR83dELV3i4LU2XrCz91ri1eSW924rQUVQXFhhHb/65W7Lho4Y1r3BaxRCsd5aUlGTuKE2rDf6P9JLmZB0sZ0fvkOSYzhLAer7FIdZERX68SWpJ3BsU3zU9ba3s3XI1ZcSeFHQVru/l4ZYpKyKpnujGjdxfjCt04hsSjhI/heDHhBuwJNHjIVjurPTlF1Ncn5pttZG6BOO4B3G6XN+Gfb6yU8I6G8G/SC4XerFep/QY2Zv8DxBQjU="

# configure which branches to run
branches:
  except:
    - /^wip.*$/
    - /^test.*/
