language: java
sudo: false

before_script:
  - cp $TRAVIS_BUILD_DIR/.travis.settings.xml ~/.m2/settings.xml 

script:
  - mvn test
  - mvn package -DskipTests=true

after_success:
  - mvn deploy

# Set up notification options
notifications: 
  email:
    recipients:
      - devops@keynexus.net

    # change is when the repo status goes from pass to fail or vice versa
    on_success: change
    on_failure: always

# declare your environment variables
env:
  # global will stay the same across all matrix possibilities (will not create additional combinations to run)
  global: 
    - KN_THEME=default
    - KN_ENVIRONMENT=test
    - CC_TEST_REPORTER_ID=45c807ce000072ac08ab5da26a869f6d79f31f640d437ff7850707c76e29c771
  
  #artifactory id, encrypted value
  secure: "aJK+02wGpaVCW4fTHtEz+A1+rw01Tdrksg6Xq7QhFz1UHx11cdMqUHPlrUzEPxGNnrThmVnqzFyxGq7lXUwG9o4q7aBmaYji2m6jjo9kRTUgR9788bQHGShtwtxdajmP3l2wddBuJJAfL9/eCgcTKFk3gCdUxtPwOXzuW9y1IXA/HIXwgF5NOzoauaMXtxOx3orsU5nO7yOr4udP+04Zy//t8h3BItDUqMWX0uKrwGaNkYOiE6s8BKHEWQ+UTEGVbYeUUFLDGRXPEsr0BcAdD0eMNjlLdaaJHep+DEo4hFATVCYQR+apex4IBRnfAG2CzRy2OAnUj3pNYCBkAlWnIEfkRTmlCoLkn3alhtRcrMp0Cne398fdpaSNO7gYO7DVMkWYsaQhlVhdJslVqlTt6GrkjbIwUoejdQX9VCqfiTt4sCDVwlpl7tqXPHUuib44FyV+aaOXDyHOrDDNDAAr9sMUfkqyXVRgM2U1Xi+QO5dgnBX80eEuFEyi5fNbVudBx5Zk85fMEGjPEUw1BJpOY2CgZvbnIqMcNZEXxgQ6iCbawRz2QG1Ym4Of5lfqilv2MDwdRsUgMKCtwINUW9xCW64N/2QbyW6YIz8REknSO3YXE7oi2Fl85n2PFPn2IvTm2dR2KDfZRM4qIaNME+dUorb34HsjUpiEV5Cm9NCriF8="

  # encrypted artifactory password, encrypted value
  secure: "dVGlbqaWa1LtPQCxe/FOsjJA7/Qoixns5Ec4zPmVrPY4wb1S5PK2/kG/ZsW9hqLRIzXY9h8tEIc8iGGJNFSk7Z0orAZY+SHpkKU6yOjO+UroMP6b7wy20YgHlxwbLBOGSTdUTeQ9BkY18ParFEgTB5Lk4MJ51fgWRz51thmGsDhZcNZIb5USiMJPCh8zQiA8QO6Bnk3kg6XBc3IUdx3y9K2K0KAl+2owHwh+taAQ+nydJeig7Th8BiL21nWH2yBsE3+Cpg3XhwmQH+8WaCKj0kyCJ4t139mdl2FSSPsU3GUYbykTcIh/9zd77QpzdZyUcYNyeJDi/8xz1AkUHltYBW6sAg3/TuLWKqfWcXSgJEQwmmlMbLG040Ariy0e8wKV9AU5sVUOCCtq7ohnLp7C5RshkPytfcAWLZAc24kSkEdUA2OmQxWxKlcgZ2W6oWcdrVFUeqWLs4GFptSmsiyuJPhcaercankxmD2Rq5kvQBZTEkBmIJjPmrMKZVf9tZpPrMTN1KkBShD1OaJRoTYlWrqxPXSLAd+bmWyFWQNQjnTdaCw3kB1EHEYIMaCorbU8+eZSkVfwITCH0wirGd6xrzun9rwavI69PZaRY91H+86yXoLvLqXzh8o6GC3yhNa8tNaDyyb5u1I9SuW7Cu6MpI3beE7tQMr+cUE07si3qtk="

# configure which branches to run
branches:
  except:
    - /^wip.*$/
    - /^test.*/
